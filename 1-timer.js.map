{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nlet userSelectedDate;\nconst element = document.querySelector('#datetime-picker');\nconst button = document.querySelector('[data-start]');\nconst stopBtn = document.querySelector('#stop-btn');\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    userSelectedDate = selectedDates[0];\n    if (userSelectedDate < new Date()) {\n      alert('Please choose a date in the future');\n      button.disabled = true;\n    } else {\n      button.disabled = false;\n    }\n    if (element.value === '') {\n      button.disabled = true;\n    }\n  },\n};\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\nfunction addLeadingZero(value) {\n  return value.padStart(2,\"0\")\n}\nbutton.addEventListener('click', startTimer);\n\nfunction startTimer() {\n  // const currentDate = new Date().getTime();\n  // const converTimer = convertMs(userSelectedDate.getTime() - currentDate);\n  // const deltaTimer = userSelectedDate.getTime() - currentDate;\n  // console.log(`current date ${currentDate}`);\n  // console.log(`select date ${userSelectedDate.getTime()}`);\n  // console.log(converTimer);\n  // console.log(`delta ${deltaTimer}`);\n  let timer = setInterval(updateTimer, 1000);\n  console.log(timer);\n  // seconds.textContent = convertMs(\n  // userSelectedDate.getTime() - new Date().getTime()\n  // ).seconds;\n}\nfunction updateTimer() {\n  const currentDate = new Date().getTime();\n  const deltaTimer = userSelectedDate.getTime() - currentDate;\n  const converTimer = convertMs(deltaTimer);\n  if (deltaTimer < 0) {\n    clearInterval(timer);\n  }\n  days.textContent = addLeadingZero(String(converTimer.days));\n  hours.textContent = addLeadingZero(String(converTimer.hours));\n  minutes.textContent = addLeadingZero(String(converTimer.minutes));\n  seconds.textContent = addLeadingZero(String(converTimer.seconds));\n}\nflatpickr(element, options);\nstopBtn.addEventListener('click', event => {\n  for (let i = 1; i < 99999; i++) {\n    clearInterval(i);\n  }\n  console.log('Все интервалы остановлены!');\n});\n"],"names":["userSelectedDate","element","button","stopBtn","days","hours","minutes","seconds","options","selectedDates","convertMs","ms","addLeadingZero","value","startTimer","timer","updateTimer","currentDate","deltaTimer","converTimer","flatpickr","event","i"],"mappings":"wIAEA,IAAIA,EACJ,MAAMC,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BT,EAAmBS,EAAc,CAAC,EAC9BT,EAAmB,IAAI,MACzB,MAAM,oCAAoC,EAC1CE,EAAO,SAAW,IAElBA,EAAO,SAAW,GAEhBD,EAAQ,QAAU,KACpBC,EAAO,SAAW,GAErB,CACH,EACA,SAASQ,EAAUC,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EAEpCL,EAAU,KAAK,MAAQK,EAAK,MAAO,KAAQ,GAAM,EAEjDJ,EAAU,KAAK,MAASI,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CACA,SAASK,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAS,EAAE,GAAG,CAC7B,CACAX,EAAO,iBAAiB,QAASY,CAAU,EAE3C,SAASA,GAAa,CAQpB,IAAIC,EAAQ,YAAYC,EAAa,GAAI,EACzC,QAAQ,IAAID,CAAK,CAInB,CACA,SAASC,GAAc,CACrB,MAAMC,EAAc,IAAI,KAAM,EAAC,QAAO,EAChCC,EAAalB,EAAiB,QAAO,EAAKiB,EAC1CE,EAAcT,EAAUQ,CAAU,EACpCA,EAAa,GACf,cAAc,KAAK,EAErBd,EAAK,YAAcQ,EAAe,OAAOO,EAAY,IAAI,CAAC,EAC1Dd,EAAM,YAAcO,EAAe,OAAOO,EAAY,KAAK,CAAC,EAC5Db,EAAQ,YAAcM,EAAe,OAAOO,EAAY,OAAO,CAAC,EAChEZ,EAAQ,YAAcK,EAAe,OAAOO,EAAY,OAAO,CAAC,CAClE,CACAC,EAAUnB,EAASO,CAAO,EAC1BL,EAAQ,iBAAiB,QAASkB,GAAS,CACzC,QAASC,EAAI,EAAGA,EAAI,MAAOA,IACzB,cAAcA,CAAC,EAEjB,QAAQ,IAAI,4BAA4B,CAC1C,CAAC"}